{"ast":null,"code":"var _jsxFileName = \"/home/kali/mi-primer-startup/frontend/src/components/CursoDetalle.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './CursoDetalle.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBackward, faForward, faPlay, faPause, faCheckCircle, faBook, faPlayCircle, faChevronLeft, faChevronRight, faArrowLeft, faHome } from '@fortawesome/free-solid-svg-icons';\nimport { faCircle as faCircleRegular } from '@fortawesome/free-regular-svg-icons';\nimport 'animate.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CursoDetalle() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const progressRef = useRef(null);\n  const [currentVideo, setCurrentVideo] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [videoProgress, setVideoProgress] = useState({});\n  const [overallProgress, setOverallProgress] = useState(0);\n  const [completedVideos, setCompletedVideos] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [isNavigating, setIsNavigating] = useState(false);\n\n  // Datos de prueba para los cursos\n  const cursos = [\n    // ... (mantener tus datos de cursos igual)\n  ];\n\n  // Buscar el curso actual por ID\n  const curso = cursos.find(c => c.id === parseInt(id));\n\n  // Limpieza al desmontar el componente - MEJORADO\n  useEffect(() => {\n    return () => {\n      if (videoRef.current) {\n        videoRef.current.pause();\n        videoRef.current.src = \"\";\n        videoRef.current.load();\n      }\n    };\n  }, []);\n\n  // Inicializar el progreso del video y los videos completados desde localStorage al cargar\n  useEffect(() => {\n    if (curso) {\n      // ... (mantener tu código de carga de localStorage igual)\n    }\n  }, [curso]);\n\n  // Actualizar el progreso general del curso\n  useEffect(() => {\n    if (curso && Object.keys(completedVideos).length > 0) {\n      // ... (mantener este código igual)\n    }\n  }, [completedVideos, curso]);\n\n  // Guardar el progreso de los videos\n  useEffect(() => {\n    if (curso && Object.keys(videoProgress).length > 0) {\n      // ... (mantener este código igual)\n    }\n  }, [videoProgress, curso]);\n\n  // Manejar eventos del video\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    if (videoElement && !isNavigating) {\n      // ... (mantener los manejadores de eventos igual)\n\n      return () => {\n        // ... (mantener la limpieza de eventos igual)\n      };\n    }\n  }, [currentVideo, curso, videoProgress, isNavigating]);\n\n  // NUEVA FUNCIÓN SEGURA PARA NAVEGAR\n  const safeNavigate = path => {\n    setIsNavigating(true);\n\n    // Pausar el video antes de navegar\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.src = \"\";\n    }\n\n    // Navegar inmediatamente sin setTimeout\n    navigate(path);\n  };\n\n  // Función para navegar a la página de cursos - CORREGIDA\n  const volverACursos = () => {\n    safeNavigate('/cursos');\n  };\n\n  // Función para navegar a la página principal - CORREGIDA\n  const irAInicio = () => {\n    safeNavigate('/');\n  };\n\n  // Función para navegar al siguiente curso - CORREGIDA\n  const irASiguienteCurso = () => {\n    if (curso) {\n      const cursoActualIndex = cursos.findIndex(c => c.id === curso.id);\n      if (cursoActualIndex < cursos.length - 1) {\n        safeNavigate(`/curso/${cursos[cursoActualIndex + 1].id}`);\n      }\n    }\n  };\n\n  // Función para navegar al curso anterior - CORREGIDA\n  const irACursoAnterior = () => {\n    if (curso) {\n      const cursoActualIndex = cursos.findIndex(c => c.id === curso.id);\n      if (cursoActualIndex > 0) {\n        safeNavigate(`/curso/${cursos[cursoActualIndex - 1].id}`);\n      }\n    }\n  };\n\n  // Mantener el resto de las funciones como están...\n\n  if (!curso) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: \"Curso no encontrado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 12\n    }, this);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Cargando curso...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"curso-detalle animate__animated animate__fadeIn\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navigation-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-button\",\n        onClick: volverACursos,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faArrowLeft\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), \" Volver a Cursos\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"nav-button\",\n        onClick: irAInicio,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faHome\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), \" Inicio\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n_s(CursoDetalle, \"x4SrmfC+BgXUQJpMd/D/ZE1WRd4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CursoDetalle;\nexport default CursoDetalle;\nvar _c;\n$RefreshReg$(_c, \"CursoDetalle\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useParams","useNavigate","FontAwesomeIcon","faBackward","faForward","faPlay","faPause","faCheckCircle","faBook","faPlayCircle","faChevronLeft","faChevronRight","faArrowLeft","faHome","faCircle","faCircleRegular","jsxDEV","_jsxDEV","CursoDetalle","_s","id","navigate","videoRef","progressRef","currentVideo","setCurrentVideo","isPlaying","setIsPlaying","progress","setProgress","currentTime","setCurrentTime","duration","setDuration","videoProgress","setVideoProgress","overallProgress","setOverallProgress","completedVideos","setCompletedVideos","loading","setLoading","isNavigating","setIsNavigating","cursos","curso","find","c","parseInt","current","pause","src","load","Object","keys","length","videoElement","safeNavigate","path","volverACursos","irAInicio","irASiguienteCurso","cursoActualIndex","findIndex","irACursoAnterior","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","_c","$RefreshReg$"],"sources":["/home/kali/mi-primer-startup/frontend/src/components/CursoDetalle.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './CursoDetalle.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBackward, faForward, faPlay, faPause,\n  faCheckCircle, faBook, faPlayCircle,\n  faChevronLeft, faChevronRight, faArrowLeft, faHome\n} from '@fortawesome/free-solid-svg-icons';\nimport { faCircle as faCircleRegular } from '@fortawesome/free-regular-svg-icons';\nimport 'animate.css';\n\nfunction CursoDetalle() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const progressRef = useRef(null);\n  const [currentVideo, setCurrentVideo] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [videoProgress, setVideoProgress] = useState({});\n  const [overallProgress, setOverallProgress] = useState(0);\n  const [completedVideos, setCompletedVideos] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [isNavigating, setIsNavigating] = useState(false);\n\n  // Datos de prueba para los cursos\n  const cursos = [\n    // ... (mantener tus datos de cursos igual)\n  ];\n\n  // Buscar el curso actual por ID\n  const curso = cursos.find((c) => c.id === parseInt(id));\n\n  // Limpieza al desmontar el componente - MEJORADO\n  useEffect(() => {\n    return () => {\n      if (videoRef.current) {\n        videoRef.current.pause();\n        videoRef.current.src = \"\";\n        videoRef.current.load();\n      }\n    };\n  }, []);\n\n  // Inicializar el progreso del video y los videos completados desde localStorage al cargar\n  useEffect(() => {\n    if (curso) {\n      // ... (mantener tu código de carga de localStorage igual)\n    }\n  }, [curso]);\n\n  // Actualizar el progreso general del curso\n  useEffect(() => {\n    if (curso && Object.keys(completedVideos).length > 0) {\n      // ... (mantener este código igual)\n    }\n  }, [completedVideos, curso]);\n\n  // Guardar el progreso de los videos\n  useEffect(() => {\n    if (curso && Object.keys(videoProgress).length > 0) {\n      // ... (mantener este código igual)\n    }\n  }, [videoProgress, curso]);\n\n  // Manejar eventos del video\n  useEffect(() => {\n    const videoElement = videoRef.current;\n\n    if (videoElement && !isNavigating) {\n      // ... (mantener los manejadores de eventos igual)\n\n      return () => {\n        // ... (mantener la limpieza de eventos igual)\n      };\n    }\n  }, [currentVideo, curso, videoProgress, isNavigating]);\n\n  // NUEVA FUNCIÓN SEGURA PARA NAVEGAR\n  const safeNavigate = (path) => {\n    setIsNavigating(true);\n    \n    // Pausar el video antes de navegar\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.src = \"\";\n    }\n\n    // Navegar inmediatamente sin setTimeout\n    navigate(path);\n  };\n\n  // Función para navegar a la página de cursos - CORREGIDA\n  const volverACursos = () => {\n    safeNavigate('/cursos');\n  };\n\n  // Función para navegar a la página principal - CORREGIDA\n  const irAInicio = () => {\n    safeNavigate('/');\n  };\n\n  // Función para navegar al siguiente curso - CORREGIDA\n  const irASiguienteCurso = () => {\n    if (curso) {\n      const cursoActualIndex = cursos.findIndex(c => c.id === curso.id);\n      if (cursoActualIndex < cursos.length - 1) {\n        safeNavigate(`/curso/${cursos[cursoActualIndex + 1].id}`);\n      }\n    }\n  };\n\n  // Función para navegar al curso anterior - CORREGIDA\n  const irACursoAnterior = () => {\n    if (curso) {\n      const cursoActualIndex = cursos.findIndex(c => c.id === curso.id);\n      if (cursoActualIndex > 0) {\n        safeNavigate(`/curso/${cursos[cursoActualIndex - 1].id}`);\n      }\n    }\n  };\n\n  // Mantener el resto de las funciones como están...\n\n  if (!curso) {\n    return <div className=\"error\">Curso no encontrado</div>;\n  }\n\n  if (loading) {\n    return <div className=\"loading\">Cargando curso...</div>;\n  }\n\n  return (\n    <div className=\"curso-detalle animate__animated animate__fadeIn\">\n      <div className=\"navigation-buttons\">\n        <button className=\"nav-button\" onClick={volverACursos}>\n          <FontAwesomeIcon icon={faArrowLeft} /> Volver a Cursos\n        </button>\n        <button className=\"nav-button\" onClick={irAInicio}>\n          <FontAwesomeIcon icon={faHome} /> Inicio\n        </button>\n      </div>\n\n      {/* ... El resto del JSX se mantiene igual ... */}\n    </div>\n  );\n}\n\nexport default CursoDetalle;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}